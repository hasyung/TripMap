<%= render "base" %>

<div class="page-header">
  <h1><%= t("admin.apis.v1") %>API</h1>
</div>
<div class="api-description">
  <blockquote>
    <p class="text-info">此API参考文档专为旅图项目服务（服务器端名TripMap），当前版本号为0.1.0，该API参考文档是稳定的。</p>
    <small>最后更新时间 2013-03-21 21:45</small>
  </blockquote>
</div>
<div class="api-list">
  <h4>API列表</h4>
  <ol>
    <li><a href="#maps">获取所有地图简略信息</a></li>
    <li><a href="#maps_active">获取单个地图详细信息</a></li>
    <li><a href="#validate">验证序列号和设备号</a></li>
    <li><a href="#share_current">获取当前分享</a></li>
    <li><a href="#share_arround">获取周边分享</a></li>
    <li><a href="#share_upload">上传我的分享</a></li>
    <li><a href="#weathers">获取当前地图所在城市天气</a></li>
    <li><a href="#logs">上传当前地图使用日志</a></li>
    <li><a href="#versions">检测地图数据包是否更新</a></li>
    <li><a href="#create_nickname">上传昵称</a></li>
    <li><a href="#get_nickname">获取昵称</a></li>
  </ol>
</div>
<div class="api-content">
  <div id="maps" class="api well">
    <h3 class="name">API1</h3>
    <small class="desc">获取所有的地图信息，结果为JSON数据格式。</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        无
      <dd>
    </dl>
  </div>
  
  <div id="maps_active" class="api well">
    <h3 class="name">API2</h3>
    <small class="desc">获取单个地图详细信息，结果为JSON数据格式。</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= show_api_v1_maps_url %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号，以指定查找哪张地图的内容。</td>
            </tr>
          </tbody>
        </table>
      <dd>
      <dt>参数分组</dt>
      <dd>［map_id, serial, device_id］<dd>
    </dl>
  </div>
  
  <div id="validate" class="api well">
    <h3 class="name">API3</h3>
    <small class="desc">验证序列号和设备号</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= validate_api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
           <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号，以验证哪张地图所对应的序列号。</td>
            </tr>
            <tr>
              <td>2</td>
              <td>serial</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>地图注册码</td>
            </tr>
            <tr>
              <td>3</td>
              <td>device_id</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>用户设备id</td>
            </tr>          
          </tbody>
        </table>
        <dd>
    </dl>
  </div>

  <div id="share_current" class="api well">
    <h3 class="name">API4</h3>
    <small class="desc">获取当前分享，结果为JSON数据格式。</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= shares_current_api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>
            <tr>
              <td>2</td>
              <td>page_size</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>每一页的大小</td>
            </tr>
            <tr>
              <td>3</td>
              <td>page_index</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>起始页</td>
            </tr>
          </tbody>
        </table>
      <dd>
    </dl>
  </div>
  
  <div id="share_arround" class="api well">
    <h3 class="name">API5</h3>
    <small class="desc">获取周边分享，结果为JSON数据格式。</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= shares_nearby_api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>
            <tr>
              <td>2</td>
              <td>page_size</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>每一页的大小</td>
            </tr>
            <tr>
              <td>3</td>
              <td>page_index</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>起始页</td>
            </tr>
          </tbody>
        </table>
      <dd>
    </dl>
  </div>
  
  <div id="share_upload" class="api well">
    <h3 class="name">API6</h3>
    <small class="desc">上传我的分享，结果为JSON数据格式。</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= shares_create_api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>POST<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>
            <tr>
              <td>2</td>
              <td>title</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>分享标题</td>
            </tr>
            <tr>
              <td>3</td>
              <td>nickname_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>昵称id</td>
            </tr>
            <tr>
              <td>4</td>
              <td>image</td>
              <td>文件</td>
              <td>必选参数</td>
              <td>拍的照片</td>
            </tr>
            <tr>
              <td>5</td>
              <td>text</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>心情文字描述</td>
            </tr>
          </tbody>
        </table>
      <dd>
    </dl>
  </div>
  
  <div id="weathers" class="api well">
    <h3 class="name">API7</h3>
    <small class="desc">获取当前地图所在城市天气</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= api_v1_map_weathers_url(:map_id, :format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>            
          </tbody>
        </table>
      <dd>
      <dt>例子</dt>
      <dd><%= api_v1_map_weathers_url(:map_id => 1, :format => :json) %><dd>
    </dl>
  </div>
  
  <div id="logs" class="api well">
    <h3 class="name">API8</h3>
    <small class="desc">上传当前地图使用日志</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= logs_api_v1_maps_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>POST<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>
            <tr>
              <td>2</td>
              <td>device_id</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>设备串号</td>
            </tr>
            <tr>
              <td>3</td>
              <td>device_type</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>设备平台（Android、iOS、WindowsPhone）</td>
            </tr>
            <tr>
              <td>4</td>
              <td>slug</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>简码</td>
            </tr>
            <tr>
              <td>5</td>
              <td>message</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>日志信息</td>
            </tr>
          </tbody>
        </table>
      <dd>
    </dl>
  </div>
  
  <div id="versions" class="api well">
    <h3 class="name">API9</h3>
    <small class="desc">检测地图数据包是否更新</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= version_api_v1_map_url(:map_id, :format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>map_id</td>
              <td>整数</td>
              <td>必选参数</td>
              <td>地图编号</td>
            </tr>            
          </tbody>
        </table>
      <dd>
      <dt>例子</dt>
      <dd><%= version_api_v1_map_url(:id => 1, :format => :json) %><dd>
    </dl>
  </div>
  
  <div id="create_nickname" class="api well">
    <h3 class="name">API10</h3>
    <small class="desc">上传昵称</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= create_api_v1_nicknames_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>POST<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>device_id</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>用户设备id</td>
            </tr>
            <tr>
              <td>2</td>
              <td>nickname</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>昵称</td>
            </tr>            
          </tbody>
        </table>
        <dd>
    </dl>
  </div>

  <div id="get_nickname" class="api well">
    <h3 class="name">API11</h3>
    <small class="desc">获取昵称</small>
    <dl>
      <dt>URL</dt>
      <dd><pre class="docs-example"><%= show_api_v1_nicknames_url(:format => :json) %></pre></dd>
      <dt>HTTP请求方式</dt>
      <dd>GET<dd>
      <dt>支持格式</dt>
      <dd>json<dd>
      <dt>是否需要登录</dt>
      <dd>否<dd>
      <dt>请求参数</dt>
      <dd>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>名字</th>
              <th>类型</th>
              <th>类别</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>device_id</td>
              <td>字符串</td>
              <td>必选参数</td>
              <td>用户设备id</td>
            </tr>          
          </tbody>
        </table>
        <dd>
    </dl>
  </div>

</div>